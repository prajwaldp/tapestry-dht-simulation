# Tapestry Distributed Hash Table Simulation

This project simulates the following aspects of the tapestry algorithm
for distributed hash tables:

* The network creation (initializing of nodes and their routing tables)
* Addition of a new node into an initialized network (with all the nodes
having their routing tables initialized).

## How it works

> TODO

## Instructions

Run the project as:

```
$ mix run project3.exs <num_nodes> <num_requests>
```

`num_nodes` is the number of nodes in the network.
- Initially, a network with `num_nodes - 1` nodes is created and their routing tables
are populated.
- Then, another node is added to the network. This introduces modifications
to the routing tables of the older nodes in the network.

`num_requests` is the number of requests each node makes. These requests are to other
random nodes in the network and are sent after a time delay. The time delay is set
in the key `:delay_between_reqs` of the `:tapestry` application in `config/config.exs`.
The **default** time delay between requests from a node is **1000 ms**. The runtime of
the program for larger number of requests can be reduced by reducing this value.

To see a detailed explanation, the log level can be set to `:debug` in `config/config.exs`.
When the log level is set to debug, the path each request has taken from the source to the
the destination is printed.

For example (with the log level set to debug - `config :logger, level: :debug` in `config/config.exs`)

```
$ mix run project3.exs 20 2

13:32:59.664 [debug] Done in 1 hop(s), path = 2DA1E257A1DD524E9EB75C522FF74F521BCFEC47 -> D3978C883E77D19C5C34766C3E29EA1BF2CD0A58

13:32:59.664 [debug] Done in 1 hop(s), path = 40F636634A051F40D70310B2334F34C8D572B525 -> 3830B67456CD0D74A6D9322840A1501D36FAB0E1

13:32:59.664 [debug] Done in 1 hop(s), path = A8D175CB6001BB9DECB09F8095D271B3B169C9B8 -> 16A416B2842A26B5F6E48B5235668B5CA8B78EE1

13:32:59.664 [debug] Done in 1 hop(s), path = 64E8C8FD42DBE5ECC5B45B48785CBF688A054A66 -> A21ED46CA3CCF5FA426DC817B48F030971ADFABE

13:32:59.664 [debug] Done in 1 hop(s), path = 827DCE6028AB19C77DBD6F7CC2E300F075F3EB94 -> 450E29D655DB442CA9AD0E521EEEDEBEB0F75F36

13:32:59.664 [debug] Done in 1 hop(s), path = 450E29D655DB442CA9AD0E521EEEDEBEB0F75F36 -> 9972990F0F774E33E6C7E4C77D8A62CA5DC281CC

13:32:59.666 [debug] Done in 1 hop(s), path = 21DDB8B02D4367074754DD2A81CED502845BC41B -> 9972990F0F774E33E6C7E4C77D8A62CA5DC281CC

13:32:59.664 [debug] Done in 2 hop(s), path = 9D3DBB81B18A9083E6D9CB14C5B0A344E1931075 -> B3A96A40D40178EE60747517F12DEAC73E35F1AB -> B62A4D2451474898BA2FD70A06414AF9FD3B5841

13:32:59.664 [debug] Done in 1 hop(s), path = AA0F0421CA6FFE079193D31A70E313D6028A8DA8 -> 84E38575A6DD32E2A344645A50880454B6861B29

13:32:59.666 [debug] Done in 1 hop(s), path = E47930F15E13CD3F4797916C27F039229E315CFD -> B62A4D2451474898BA2FD70A06414AF9FD3B5841

13:32:59.664 [debug] Done in 2 hop(s), path = B3A96A40D40178EE60747517F12DEAC73E35F1AB -> AA0F0421CA6FFE079193D31A70E313D6028A8DA8 -> A8D175CB6001BB9DECB09F8095D271B3B169C9B8

13:32:59.666 [debug] Done in 2 hop(s), path = 2D62C769110E506E997D7037734B4CC085DC3A8A -> A21ED46CA3CCF5FA426DC817B48F030971ADFABE -> A8D175CB6001BB9DECB09F8095D271B3B169C9B8

13:32:59.664 [debug] Done in 1 hop(s), path = 84E38575A6DD32E2A344645A50880454B6861B29 -> 64E8C8FD42DBE5ECC5B45B48785CBF688A054A66

13:32:59.664 [debug] Done in 1 hop(s), path = C15ED06A821DA5484F22CF949591175F84850FB9 -> 9D3DBB81B18A9083E6D9CB14C5B0A344E1931075

13:32:59.666 [debug] Done in 1 hop(s), path = 16A416B2842A26B5F6E48B5235668B5CA8B78EE1 -> E47930F15E13CD3F4797916C27F039229E315CFD

13:32:59.666 [debug] Done in 1 hop(s), path = A21ED46CA3CCF5FA426DC817B48F030971ADFABE -> E47930F15E13CD3F4797916C27F039229E315CFD

13:32:59.666 [debug] Done in 1 hop(s), path = 3830B67456CD0D74A6D9322840A1501D36FAB0E1 -> 40F636634A051F40D70310B2334F34C8D572B525

13:32:59.666 [debug] Done in 1 hop(s), path = 9972990F0F774E33E6C7E4C77D8A62CA5DC281CC -> 2DA1E257A1DD524E9EB75C522FF74F521BCFEC47

13:32:59.666 [debug] Done in 2 hop(s), path = D3978C883E77D19C5C34766C3E29EA1BF2CD0A58 -> AA0F0421CA6FFE079193D31A70E313D6028A8DA8 -> A21ED46CA3CCF5FA426DC817B48F030971ADFABE

13:32:59.666 [debug] Done in 2 hop(s), path = B62A4D2451474898BA2FD70A06414AF9FD3B5841 -> AA0F0421CA6FFE079193D31A70E313D6028A8DA8 -> A21ED46CA3CCF5FA426DC817B48F030971ADFABE

13:33:00.663 [debug] Done in 1 hop(s), path = E47930F15E13CD3F4797916C27F039229E315CFD -> 2DA1E257A1DD524E9EB75C522FF74F521BCFEC47

13:33:00.663 [debug] Done in 1 hop(s), path = 827DCE6028AB19C77DBD6F7CC2E300F075F3EB94 -> 84E38575A6DD32E2A344645A50880454B6861B29

13:33:00.663 [debug] Done in 1 hop(s), path = A8D175CB6001BB9DECB09F8095D271B3B169C9B8 -> C15ED06A821DA5484F22CF949591175F84850FB9

13:33:00.663 [debug] Done in 1 hop(s), path = 450E29D655DB442CA9AD0E521EEEDEBEB0F75F36 -> C15ED06A821DA5484F22CF949591175F84850FB9

13:33:00.663 [debug] Done in 1 hop(s), path = 2DA1E257A1DD524E9EB75C522FF74F521BCFEC47 -> 9972990F0F774E33E6C7E4C77D8A62CA5DC281CC

13:33:00.663 [debug] Done in 1 hop(s), path = 21DDB8B02D4367074754DD2A81CED502845BC41B -> D3978C883E77D19C5C34766C3E29EA1BF2CD0A58

13:33:00.663 [debug] Done in 2 hop(s), path = 64E8C8FD42DBE5ECC5B45B48785CBF688A054A66 -> A21ED46CA3CCF5FA426DC817B48F030971ADFABE -> AA0F0421CA6FFE079193D31A70E313D6028A8DA8

13:33:00.663 [debug] Done in 2 hop(s), path = 9D3DBB81B18A9083E6D9CB14C5B0A344E1931075 -> B3A96A40D40178EE60747517F12DEAC73E35F1AB -> B62A4D2451474898BA2FD70A06414AF9FD3B5841

13:33:00.663 [debug] Done in 2 hop(s), path = 40F636634A051F40D70310B2334F34C8D572B525 -> A21ED46CA3CCF5FA426DC817B48F030971ADFABE -> AA0F0421CA6FFE079193D31A70E313D6028A8DA8

13:33:00.663 [debug] Done in 1 hop(s), path = 2D62C769110E506E997D7037734B4CC085DC3A8A -> 2DA1E257A1DD524E9EB75C522FF74F521BCFEC47

13:33:00.663 [debug] Done in 2 hop(s), path = B3A96A40D40178EE60747517F12DEAC73E35F1AB -> 9D3DBB81B18A9083E6D9CB14C5B0A344E1931075 -> 9972990F0F774E33E6C7E4C77D8A62CA5DC281CC

13:33:00.663 [debug] Done in 2 hop(s), path = C15ED06A821DA5484F22CF949591175F84850FB9 -> 9D3DBB81B18A9083E6D9CB14C5B0A344E1931075 -> 9972990F0F774E33E6C7E4C77D8A62CA5DC281CC

13:33:00.663 [debug] Done in 1 hop(s), path = 84E38575A6DD32E2A344645A50880454B6861B29 -> 827DCE6028AB19C77DBD6F7CC2E300F075F3EB94

13:33:00.663 [debug] Done in 1 hop(s), path = AA0F0421CA6FFE079193D31A70E313D6028A8DA8 -> C15ED06A821DA5484F22CF949591175F84850FB9

13:33:00.667 [debug] Done in 1 hop(s), path = 3830B67456CD0D74A6D9322840A1501D36FAB0E1 -> 64E8C8FD42DBE5ECC5B45B48785CBF688A054A66
All requests completed. Max hops needed = 2

13:33:00.667 [debug] Done in 1 hop(s), path = 16A416B2842A26B5F6E48B5235668B5CA8B78EE1 -> 3830B67456CD0D74A6D9322840A1501D36FAB0E1

13:33:00.667 [debug] Done in 2 hop(s), path = A21ED46CA3CCF5FA426DC817B48F030971ADFABE -> 2DA1E257A1DD524E9EB75C522FF74F521BCFEC47 -> 2D62C769110E506E997D7037734B4CC085DC3A8A

13:33:00.667 [debug] Done in 2 hop(s), path = D3978C883E77D19C5C34766C3E29EA1BF2CD0A58 -> AA0F0421CA6FFE079193D31A70E313D6028A8DA8 -> A8D175CB6001BB9DECB09F8095D271B3B169C9B8

13:33:00.667 [debug] Done in 2 hop(s), path = 9972990F0F774E33E6C7E4C77D8A62CA5DC281CC -> A21ED46CA3CCF5FA426DC817B48F030971ADFABE -> A8D175CB6001BB9DECB09F8095D271B3B169C9B8

13:33:00.667 [debug] Done in 2 hop(s), path = B62A4D2451474898BA2FD70A06414AF9FD3B5841 -> 450E29D655DB442CA9AD0E521EEEDEBEB0F75F36 -> 40F636634A051F40D70310B2334F34C8D572B525
```